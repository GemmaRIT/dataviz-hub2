{"version":3,"sources":["webpack:///./src/templates/blog/blogPostTemplate.jsx","webpack:///./src/utils/hooks/trackTableOfContent.jsx"],"names":["query","blogPostTemplate","tableOfContent","mdx","data","pageContext","location","useLocation","frontmatter","title","date","author","category","tag","disableTOC","prev","next","githubLink","fields","slug","substring","lastIndexOf","shareLink","host","shareMessage","description","d3","map","d","includes","useScript","withPrefix","tableOfContents","tocSelector","itemSelector","handleClassList","element","tagName","type","el","parentElement","rm","classList","remove","add","useEffect","handleTOC","observer","IntersectionObserver","entries","forEach","entry","id","target","getAttribute","document","querySelector","intersectionRatio","querySelectorAll","item","observe","addEventListener","removeEventListener","trackTableOfContent","renderItem","key","className","href","url","items","renderSubItem","keywords","Helmet","async","src","charset","top","delay","style","minHeight","cascade","duration","textShadow","authors","name","avatar","childImageSharp","fluid","idx","length","readingTime","text","cat","to","kebabCase","left","maxWidth","height","overflow","solid","small","message","link","subject","rel","data-tip","data-for","offset","backgroundColor","Object","keys","color","components","h1","H1","h2","H2","h3","H3","h4","H4","h5","H5","h6","H6","p","P","a","A","ol","Ol","li","Li","hr","Hr","del","Del","pre","Pre","ul","Ul","blockquote","BlockQuote","Link","em","EM","img","IMG","table","Table","Accordion","AccordionItem","AccordionItemHeading","AccordionItemButton","AccordionItemPanel","LPWrap","LPItem","TwitterBtn","body","borderBottom","share","github","window","options","clientID","process","clientSecret","repo","owner","admin","substr","distractionFreeMode"],"mappings":"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","file":"component---src-templates-blog-blog-post-template-jsx-3124ded4492646f1ef22.js","sourcesContent":["import React from \"react\"\r\nimport { graphql, withPrefix } from \"gatsby\"\r\nimport PropTypes from \"prop-types\"\r\nimport SEO from \"../../components/shared/seo\"\r\nimport { MDXProvider } from \"@mdx-js/react\"\r\nimport { MDXRenderer } from \"gatsby-plugin-mdx\"\r\nimport Helmet from \"react-helmet\"\r\nimport kebabCase from \"lodash.kebabcase\"\r\nimport \"katex/dist/katex.min.css\"\r\nimport { useLocation } from \"@reach/router\"\r\nimport { useScript } from \"../../utils/hooks/useScript\"\r\nimport { trackTableOfContent } from \"../../utils/hooks/trackTableOfContent\"\r\n\r\nimport Header from \"../../components/shared/header\"\r\nimport Footer from \"../../components/shared/footer\"\r\nimport PaginationPost from \"../../components/blog/paginationPost\"\r\nimport {CatBtn, TagBtn} from \"../../components/style/styled\"\r\nimport { H1, H2, H3, H4, H5, H6, P, A, Ol, Li, Hr, Del, Pre, Ul, BlockQuote, Link, EM, Table, LPItem, LPWrap, IMG, TwitterBtn } from \"../../components/style/blogPostStyle\"\r\nimport { Accordion, AccordionItem, AccordionItemHeading, AccordionItemButton, AccordionItemPanel } from 'react-accessible-accordion';\r\nimport GitalkComponent from \"gitalk/dist/gitalk-component\";\r\nimport Fade from \"react-reveal/Fade\"\r\nimport Pulse from 'react-reveal/Pulse';\r\nimport { Twitter, Facebook, Mail, Linkedin } from \"react-social-sharing\"\r\nimport { RiEditBoxLine } from \"react-icons/ri\"\r\nimport ReactTooltip from \"react-tooltip\";\r\n\r\n\r\n\r\nconst blogPostTemplate = ({ data: { mdx }, pageContext }) => {\r\n  const location = useLocation();\r\n  const { title, date, author, category, tag, disableTOC } = mdx.frontmatter\r\n  const {prev, next} = pageContext\r\n  \r\n  const folderName = mdx.fields.slug.substring(mdx.fields.slug.lastIndexOf(\"/\")+1,)\r\n  const githubLink = `https://github.com/researchdata-sheffield/dataviz-hub2/tree/development/content/blog/${folderName}/index.mdx`\r\n  const shareLink = `https://${location.host}${mdx.fields.slug}`\r\n  const shareMessage = `${mdx.frontmatter.title} - ${mdx.frontmatter.description}`\r\n\r\n  // include d3 scripts\r\n  const d3 = mdx.frontmatter.d3 ? mdx.frontmatter.d3 : null\r\n  {d3 && d3.map((d) => {\r\n    if(d.includes(\"https://\")) useScript(d, \"\", false);  // external script\r\n    else useScript(withPrefix(`d3/${d}`), \"\", false);   \r\n  })}\r\n\r\n  // enable/disable table of content\r\n  var tableOfContent\r\n  if(disableTOC === \"true\") {\r\n    tableOfContent = null\r\n  } else {\r\n    tableOfContent = mdx.tableOfContents\r\n    trackTableOfContent(`.TOC li a`, `.mdxBody`)\r\n  }\r\n\r\n  //Rendering table of content\r\n  const renderItem = (item) => (\r\n    <li key={item.title} className=\"pb-1 list-none\">\r\n      {/* Heading */}\r\n      <a href={item.url} className=\"inline-block\"><p>{item.title}</p></a>\r\n      {/* Sub-heading */}\r\n      { item.items ? (<ul className=\"pl-3\">{item.items.map(renderSubItem)}</ul>) : <></> }\r\n    </li>\r\n  ); \r\n  const renderSubItem = (item) => (\r\n    <li key={item.title} className=\"pt-1 list-none\">\r\n      { item.url ? <a href={item.url}> {item.title}</a> : <></> }\r\n      { item.items ? ( <ul className=\"pl-3\">{item.items.map(renderSubItem)}</ul>) : <></> }\r\n    </li>\r\n  ); \r\n\r\n\r\n  if (typeof window !== `undefined`) {\r\n    //const list = document.querySelector('.gatsby-code-title')\r\n    // selector all code block titles\r\n    // add copy to clipboard button for every title\r\n    // add copy function to button \r\n  }\r\n\r\n  return (\r\n    <div className=\"relative\" key={mdx.id}>\r\n      <SEO title={title} keywords={[\"the university of sheffield\", \"data visualisation\", \"data visualisation hub\", \"research\", \"blog\"]} />\r\n      <Header />\r\n      <Helmet >\r\n        <script>{`\r\n          var element = document.getElementById(\"headElement\");\r\n          var title = document.getElementById(\"title\").textContent;\r\n          var dimensions = element.getClientRects()[0];\r\n          var pattern = Trianglify({\r\n            width: dimensions.width, \r\n            height: dimensions.height,\r\n            cell_size: 60 + Math.ceil(Math.random() * 100),\r\n            variance: Math.random(),\r\n            stroke_width: Math.random() * 5,\r\n          });\r\n          pattern.seed = title\r\n          element.style['background-image'] = 'url(' + pattern.png() + ')';\r\n        `}</script>\r\n        <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\" type = 'text/javascript' /> \r\n      </Helmet>\r\n      \r\n      {/* Top background, title and author etc. */}\r\n      <Fade top delay={300}>\r\n      <div id=\"headElement\" className=\"flex flex-wrap justify-center self-center content-center items-center m-auto shadow-c1\" style={{minHeight: \"50vh\", }}>\r\n        <Pulse cascade delay={2000} duration={500}>\r\n        <div className=\"flex flex-col flex-wrap text-center text-white pt-24 pb-16\">\r\n          <div className=\"px-3 lg:px-48 2xl:px-78 leading-tight\">\r\n            <h1 id=\"title\" className=\"text-4xl xl:text-5xl font-semibold\" style={{textShadow: \"black 0px 0px 45px\"}}>{title}</h1>\r\n          </div>\r\n          \r\n          <div className=\"flex justify-center mt-12 items-center\">\r\n            {author.map((authors) => (\r\n              <img className=\"rounded-full mx-1 h-30px w-30px lg:h-40px lg:w-40px 2xl:h-50px 2xl:w-50px\" key={authors.name} src={authors.avatar.childImageSharp.fluid.src}  />\r\n            ))}\r\n            <div className=\"inline-block px-2 text-left font-semibold\" style={{textShadow: \"black 0px 0px 15px\"}}>\r\n              <h1 className=\"text-sm xl:text-base\">\r\n                {author.map((authors, idx) => ( (author.length === idx + 1) ? authors.name : authors.name + \" · \" ))}\r\n              </h1>\r\n              <h1 className=\"text-xs xl:text-sm\">{date} · {mdx.fields.readingTime.text}</h1>\r\n            </div>\r\n          </div> \r\n\r\n          <div className=\"mt-4 text-xs 2xl:text-sm mx-auto flex flex-wrap px-2\">\r\n            {category.map((cat) => ( <CatBtn key={cat} to={`/blog/category/${kebabCase(cat)}`}>{cat}</CatBtn> ))}\r\n            {tag.map((tag) => ( <TagBtn key={tag} to={`/blog/tag/${kebabCase(tag)}`}>{tag}</TagBtn> ))}\r\n          </div>\r\n        </div>\r\n        </Pulse>\r\n      </div>\r\n      </Fade>\r\n\r\n      {/* body */}\r\n      <div className=\"flex flex-wrap relative lg:px-10 2xl:px-40 pt-10\">\r\n        {/* desktop share buttons */}\r\n        <div className=\"left-0 top-0 sticky hidden lg:block z-10\">\r\n          <Fade left cascade delay={1000} duration={1300}>   \r\n            <div className=\"flex flex-col text-xs\" style={{maxWidth: \"40px\", height: \"0\", overflow: \"visible\"}}>\r\n              <Twitter className=\"greyScale-100 hover:greyScale-0 mt-28 transition duration-500\" solid small message={shareMessage} link={shareLink} />\r\n              <Facebook className=\"greyScale-100 hover:greyScale-0 transition duration-500\" solid small link={shareLink} />\r\n              <Mail className=\"hover:bg-red-600 transition duration-500\" solid small subject={shareMessage} link={shareLink} />\r\n              <Linkedin className=\"greyScale-100 hover:greyScale-0 transition duration-500\" solid small message={shareMessage} link={shareLink} />\r\n              <hr className=\"my-3\" />\r\n              <a href={githubLink} target=\"_blank\" rel=\"noopener noreferrer\" data-tip=\"\" data-for=\"share_editpost\" offset={{top: 100, left: 100}} title=\"share on github\">\r\n                <div className=\"m-2 mt-1 bg-transparent text-black flex justify-center rounded-md text-xl transition duration-500\"><RiEditBoxLine /></div>\r\n              </a>\r\n\r\n              <ReactTooltip id=\"share_editpost\">Edit this post on GitHub</ReactTooltip>\r\n            </div>\r\n          </Fade> \r\n        </div>   \r\n\r\n        {/* mobile: table of content & share buttons */}\r\n        <div className=\"w-full shadow-md flex flex-wrap justify-center -mt-12 lg:mt-0\" style={{backgroundColor: '#f3f3f3'}}>\r\n          <div className={`${ tableOfContent && Object.keys(tableOfContent).length === 0 ? 'flex-row' : 'flex-col w-1/4'} flex text-sm justify-center items-center py-2 lg:hidden ml-10`} style={{maxWidth: '50px'}}>\r\n            <Twitter solid small message={shareMessage} link={shareLink} />\r\n            <Facebook solid small link={shareLink} />\r\n            <Mail solid small className=\"bg-red-600\" subject={shareMessage} link={shareLink} />\r\n            <Linkedin solid small message={shareMessage} link={shareLink} />\r\n            <a href={githubLink} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              <div className=\"m-2 py-1 px-2 bg-gray-800 hover:bg-highlight_2 text-white flex justify-center rounded-md text-xl\"><RiEditBoxLine /></div>\r\n            </a>\r\n          </div>    \r\n          <div className={` ${ tableOfContent && tableOfContent.items ? `pt-8 pb-5`: `hidden`} mx-auto overflow-auto text-black lg:hidden px-2`}>\r\n              {tableOfContent && tableOfContent.items && <p className=\"font-bold mb-3 pb-2 border-b-1 border-gray-300\">TABLE OF CONTENTS</p>}\r\n              { tableOfContent && tableOfContent.items && tableOfContent.items.map(renderItem) }      \r\n          </div>       \r\n        </div>   \r\n   \r\n        {/******** main mdx content  ***********/}\r\n        <div className={` ${ tableOfContent && tableOfContent.items ? `mx-auto md:max-w-70 lg:max-w-xs xl:max-w-sm 2xl:max-w-40 mdxBody`: `md:max-w-70 lg:max-w-xs xl:max-w-sm 2xl:max-w-40`} relative mx-auto container pt-6 pb-16 px-3 leading-8 text-lg`} style={{color: '#24292e'}}>\r\n          <MDXProvider \r\n            components={{ h1: H1, h2: H2, h3: H3, h4: H4, h5: H5, h6: H6, p: P, a: A, ol: Ol, li: Li, hr: Hr, del: Del, \r\n                          pre: Pre, ul: Ul, blockquote: BlockQuote, Link: Link, em: EM, img: IMG, table: Table, \r\n                          Accordion: Accordion, AccordionItem: AccordionItem, AccordionItemHeading: AccordionItemHeading, \r\n                          AccordionItemButton: AccordionItemButton, AccordionItemPanel: AccordionItemPanel, \r\n                          LPWrap: LPWrap, LPItem: LPItem, TwitterBtn: TwitterBtn\r\n                        }}\r\n            >\r\n            <MDXRenderer className=\"text-gray-100\">{mdx.body}</MDXRenderer>\r\n          </MDXProvider>\r\n        </div>\r\n\r\n        {/* sidebar toc: hidden in mobile */}\r\n        <div className={` ${ tableOfContent && tableOfContent.items ? `lg:w-2/12 lg:block`: ``} hidden noScrollBar lg:sticky lg:top-0 lg:right-0 pt-10 pb-10 max-h-100 overflow-auto`}>\r\n          <p className=\"font-bold mb-4 pb-2 text-gray-800 text-lg\" style={{borderBottom: '1px solid #eaeaea'}}>TABLE OF CONTENTS</p>\r\n          <div className=\"px-1 text-base TOC lg:pb-10\">\r\n          { tableOfContent && tableOfContent.items && tableOfContent.items.map(renderItem) }\r\n          </div>      \r\n        </div>  \r\n      </div>       \r\n \r\n\r\n      <PaginationPost mdx={mdx} prev={prev} next={next} share={[shareMessage, shareLink]} github={githubLink} />\r\n\r\n      {/* comment */}\r\n      {\r\n        (typeof window !== `undefined`) &&\r\n        <div className=\"relative z-10 pt-5 pb-16 px-5 lg:px-48 2xl:px-64 bg-white\">\r\n          <GitalkComponent options={{\r\n            clientID: process.env.GATSBY_GH_APP_GITALK_ID,\r\n            clientSecret: process.env.GATSBY_GH_APP_GITALK_SECRET,\r\n            repo: 'dataviz-hub2-comments',   \r\n            owner: 'researchdata-sheffield',\r\n            admin: ['ajtag', 'annakrystalli', 'GemmaRIT', 'rosiehigman', 'yld-weng'],\r\n            id: mdx.fields.slug.substr(0,50),\r\n            title: mdx.frontmatter.title,\r\n            body: location.href + \" | \" + mdx.frontmatter.description,\r\n            distractionFreeMode: false\r\n          }} /> \r\n        </div>    \r\n      }\r\n      \r\n      <Footer />\r\n    </div>\r\n    \r\n  )\r\n}\r\n\r\nexport default blogPostTemplate\r\n\r\nblogPostTemplate.propTypes = {\r\n  data: PropTypes.any,\r\n  pageContext: PropTypes.any,\r\n}\r\n\r\nexport const query = graphql`\r\n  query BlogPostQuery($id: String) {\r\n    mdx(id: { eq: $id }) {\r\n      id\r\n      fields {\r\n        slug\r\n        readingTime {\r\n          text\r\n        }\r\n      }\r\n      body\r\n      tableOfContents\r\n      frontmatter {\r\n        title\r\n        author {\r\n          name\r\n          avatar {\r\n            childImageSharp {\r\n              fluid {\r\n                src\r\n              }\r\n            }\r\n          }\r\n        }\r\n        date(formatString: \"D MMMM YYYY\")\r\n        description\r\n        tag\r\n        category\r\n        thumbnail {\r\n          childImageSharp {\r\n            fluid {\r\n              src\r\n            }\r\n          }\r\n        }\r\n        disableTOC\r\n        d3\r\n      }\r\n    }\r\n  }\r\n`\r\n","/* eslint-disable no-unused-vars */\r\nimport { useEffect } from \"react\"\r\nimport { FaBreadSlice } from \"react-icons/fa\";\r\n\r\n\r\n\r\n/**\r\n * \r\n * @param {insert selector for your table of contents elements} tocSelector \r\n * @param {item are selected in the form of `itemSelector [id]`} itemSelector \r\n * \r\n * structure of toc should be :\r\n * <li>\r\n *  <a>some heading</a>\r\n *  <ul>Sub headings\r\n *    <li><a>sub-heading ONE</a></li>\r\n *    <li><a>sub-heading TWO</a></li>\r\n *    ...\r\n * </ul>\r\n * </li>\r\n */\r\nexport function trackTableOfContent(tocSelector, itemSelector) {\r\n  \r\n  function handleClassList(element, tagName, type=\"add\") {\r\n    if(tagName.substring(0,1) !== \"H\") return;\r\n    var el = element.parentElement;\r\n    var rm = (type === \"remove\")\r\n    \r\n    rm ? el.classList.remove('active') : el.classList.add('active');\r\n    \r\n    if(tagName !== \"H1\") {\r\n      handleClassList(el.parentElement, `H${tagName.substring(1,) - 1}`, rm ? \"remove\" : \"add\");\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    function handleTOC() {\r\n      const observer = new IntersectionObserver(entries => {\r\n        entries.forEach(entry => {\r\n          var id = entry.target.getAttribute('id');\r\n          var element = document.querySelector(`${tocSelector}[href=\"#${id}\"]`)\r\n          if(element === null) return;\r\n\r\n          if (entry.intersectionRatio > 0) {\r\n            handleClassList(element, entry.target.tagName)\r\n          } else {\r\n            handleClassList(element, entry.target.tagName, \"remove\")\r\n          }\r\n        });\r\n      });\r\n    \r\n      // Track all items\r\n      document.querySelectorAll(`${itemSelector} [id]`).forEach((item) => {\r\n        observer.observe(item);\r\n      });\r\n    }\r\n    document.addEventListener('DOMContentLoaded', handleTOC());\r\n\r\n    return () => {\r\n      document.removeEventListener('DOMContentLoaded', handleTOC());\r\n    }\r\n  }, [])\r\n}"],"sourceRoot":""}